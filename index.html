<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Online Admission Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    const Input = ({ label, name, type = "text" }) => (
      <div className="relative">
        <input
          name={name}
          type={type}
          required
          placeholder=" "
          className="peer w-full border border-gray-300 rounded-lg px-3 pt-5 pb-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        <label className="absolute left-3 top-2 text-xs text-gray-500
          peer-placeholder-shown:top-4 peer-placeholder-shown:text-sm peer-placeholder-shown:text-gray-400
          transition-all">
          {label}
        </label>
      </div>
    );

    const App = () => {
      const [loading, setLoading] = useState(false);
      const [success, setSuccess] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        setLoading(true);

        const formData = new FormData(e.target);

        fetch("https://script.google.com/macros/s/AKfycbyO8JOwTvLCFqvzRuTxRg6qjxSKhdBPdLUzXaWdUwuxTUrexzU4DWmG1e2zlNU9KIY/exec", {
          method: "POST",
          body: formData
        })
        .then(() => {
          setLoading(false);
          setSuccess(true);
          e.target.reset();
        })
        .catch(err => {
          setLoading(false);
          alert("Submission failed");
          console.error(err);
        });
      };

      if (success) {
        return (
          <div className="min-h-screen flex items-center justify-center">
            <div className="bg-white p-10 rounded-xl shadow-xl text-center max-w-md">
              <h1 className="text-2xl font-semibold text-green-600 mb-3">
                Admission Submitted Successfully
              </h1>
              <p className="text-gray-600">
                Your data has been saved in Google Sheets.
              </p>
              <button
                onClick={() => setSuccess(false)}
                className="mt-6 bg-blue-600 text-white px-6 py-2 rounded-lg"
              >
                New Admission
              </button>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen flex items-center justify-center p-4">
          <form
            onSubmit={handleSubmit}
            className="bg-white w-full max-w-3xl rounded-xl shadow-xl p-8 space-y-8"
          >
            <h1 className="text-2xl font-semibold text-center text-blue-600">
              Online Admission Form
            </h1>

            <section>
              <h2 className="text-lg font-medium mb-4">Student Details</h2>
              <div className="grid md:grid-cols-2 gap-4">
                <Input label="Student Name" name="studentName" />
                <Input label="Date of Birth" name="dob" type="date" />
                <Input label="Class Applying For" name="classApply" />
                <Input label="Gender" name="gender" />
              </div>
            </section>

            <section>
              <h2 className="text-lg font-medium mb-4">Parent Details</h2>
              <div className="grid md:grid-cols-2 gap-4">
                <Input label="Father Name" name="fatherName" />
                <Input label="Mother Name" name="motherName" />
                <Input label="Mobile Number" name="mobile" />
                <Input label="Email" name="email" type="email" />
              </div>
            </section>

            <section>
              <h2 className="text-lg font-medium mb-4">Academic Details</h2>
              <div className="grid md:grid-cols-2 gap-4">
                <Input label="Previous School" name="school" />
                <Input label="Percentage" name="percentage" />
              </div>
            </section>

            <section>
              <h2 className="text-lg font-medium mb-4">Address</h2>
              <div className="grid md:grid-cols-2 gap-4">
                <Input label="City" name="city" />
                <Input label="State" name="state" />
                <Input label="Pin Code" name="pincode" />
                <Input label="Country" name="country" />
              </div>
            </section>

            <button
              type="submit"
              disabled={loading}
              className="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium disabled:opacity-70"
            >
              {loading ? "Submitting..." : "Submit Admission Form"}
            </button>
          </form>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
